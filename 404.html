<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 - Page Not Found | Thanattsitt Santisamranwilai</title>
    <meta name="description" content="Oops! The page you're looking for seems to have wandered off into the digital void. Let's help you find your way back.">
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Open Graph -->
    <meta property="og:title" content="404 - Page Not Found">
    <meta property="og:description" content="Lost in the digital space? Let's navigate back together.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/assets/images/404-og-image.jpg">
    
    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">
    <link rel="alternate icon" href="/assets/images/favicon.ico">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="/assets/css/critical.css" as="style">
    <link rel="preload" href="/assets/css/pages/404.css" as="style">
    <link rel="preload" href="/assets/js/components/404-handler.js" as="script">
    
    <!-- Critical CSS (Inline) -->
    <style>
        /* Critical 404 styles for immediate render */
        :root {
            --primary-color: #007bff;
            --background-primary: #ffffff;
            --text-primary: #212529;
            --error-color: #dc3545;
            --warning-color: #ffc107;
        }
        
        [data-theme="dark"] {
            --background-primary: #121212;
            --text-primary: #ffffff;
        }
        
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background-primary);
            color: var(--text-primary);
            overflow-x: hidden;
        }
        
        .error-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .error-content {
            text-align: center;
            max-width: 600px;
        }
        
        .error-code {
            font-size: clamp(4rem, 15vw, 12rem);
            font-weight: 900;
            line-height: 0.8;
            background: linear-gradient(135deg, var(--primary-color), var(--error-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0;
        }
        
        .loading-placeholder {
            height: 2rem;
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
            margin: 1rem 0;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
    
    <!-- Load CSS -->
    <link rel="stylesheet" href="/assets/css/critical.css">
    <link rel="stylesheet" href="/assets/css/components/theme-manager.css">
    <link rel="stylesheet" href="/assets/css/pages/404.css">
</head>
<body class="error-page">
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Theme Toggle -->
    <div class="theme-controls">
        <button class="theme-toggle" data-theme-toggle aria-label="Toggle theme">
            <span class="theme-icon theme-icon-auto"></span>
        </button>
    </div>
    
    <!-- Background Animation -->
    <div class="error-background" id="error-background">
        <div class="floating-shapes" id="floating-shapes"></div>
        <div class="grid-overlay" id="grid-overlay"></div>
    </div>
    
    <!-- Main Error Content -->
    <main id="main-content" class="error-container">
        <div class="error-content">
            <!-- Animated 404 -->
            <div class="error-code-container">
                <h1 class="error-code" id="error-code">404</h1>
                <div class="error-glitch" id="error-glitch"></div>
            </div>
            
            <!-- Dynamic Error Messages -->
            <div class="error-messages">
                <h2 class="error-title" id="error-title">
                    <div class="loading-placeholder"></div>
                </h2>
                
                <p class="error-description" id="error-description">
                    <div class="loading-placeholder"></div>
                </p>
                
                <div class="error-details" id="error-details">
                    <div class="loading-placeholder"></div>
                </div>
            </div>
            
            <!-- Interactive Search -->
            <div class="search-section" id="search-section" style="display: none;">
                <div class="search-container">
                    <input type="search" 
                           id="site-search" 
                           class="search-input"
                           placeholder="Search my portfolio..."
                           autocomplete="off"
                           spellcheck="false">
                    <button class="search-button" type="button" id="search-button">
                        <svg class="search-icon" viewBox="0 0 24 24" width="18" height="18">
                            <path fill="currentColor" d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                        </svg>
                        <span class="sr-only">Search</span>
                    </button>
                </div>
                
                <div class="search-suggestions" id="search-suggestions"></div>
            </div>
            
            <!-- Navigation Options -->
            <div class="navigation-options" id="navigation-options" style="display: none;">
                <div class="nav-grid">
                    <!-- Home -->
                    <a href="/" class="nav-card" data-page="home">
                        <div class="nav-icon">üè†</div>
                        <div class="nav-content">
                            <h3>Home</h3>
                            <p>Return to homepage</p>
                        </div>
                    </a>
                    
                    <!-- Portfolio -->
                    <a href="/portfolio" class="nav-card" data-page="portfolio">
                        <div class="nav-icon">üíº</div>
                        <div class="nav-content">
                            <h3>Portfolio</h3>
                            <p>View my work</p>
                        </div>
                    </a>
                    
                    <!-- About -->
                    <a href="/about" class="nav-card" data-page="about">
                        <div class="nav-icon">üë®‚Äçüíª</div>
                        <div class="nav-content">
                            <h3>About</h3>
                            <p>Learn about me</p>
                        </div>
                    </a>
                    
                    <!-- Contact -->
                    <a href="/contact" class="nav-card" data-page="contact">
                        <div class="nav-icon">üì¨</div>
                        <div class="nav-content">
                            <h3>Contact</h3>
                            <p>Get in touch</p>
                        </div>
                    </a>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="action-buttons" id="action-buttons" style="display: none;">
                <button class="btn btn-primary" id="go-home">
                    <svg class="btn-icon" viewBox="0 0 24 24" width="16" height="16">
                        <path fill="currentColor" d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"/>
                    </svg>
                    Take Me Home
                </button>
                
                <button class="btn btn-secondary" id="go-back">
                    <svg class="btn-icon" viewBox="0 0 24 24" width="16" height="16">
                        <path fill="currentColor" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"/>
                    </svg>
                    Go Back
                </button>
                
                <button class="btn btn-outline" id="report-issue">
                    <svg class="btn-icon" viewBox="0 0 24 24" width="16" height="16">
                        <path fill="currentColor" d="M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"/>
                    </svg>
                    Report Issue
                </button>
            </div>
            
            <!-- Footer Info -->
            <div class="error-footer" id="error-footer" style="display: none;">
                <div class="error-stats">
                    <div class="stat-item">
                        <span class="stat-label">Error Code:</span>
                        <span class="stat-value">404</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Timestamp:</span>
                        <span class="stat-value" id="error-timestamp"></span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Requested URL:</span>
                        <span class="stat-value" id="requested-url"></span>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Easter Egg Game -->
    <div class="easter-egg-trigger" id="easter-egg-trigger">
        <div class="secret-counter" id="secret-counter">0</div>
    </div>
    
    <div class="mini-game-modal" id="mini-game-modal" style="display: none;">
        <div class="mini-game-content">
            <h3>üéÆ Mini Game Unlocked!</h3>
            <p>Help the lost pixel find its way home!</p>
            <div class="game-container" id="game-container"></div>
            <button class="btn btn-small" id="close-game">Close Game</button>
        </div>
    </div>
    
    <!-- Issue Report Modal -->
    <div class="modal" id="report-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Report an Issue</h3>
                <button class="modal-close" id="close-report-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="issue-report-form">
                    <div class="form-group">
                        <label for="issue-type">Issue Type:</label>
                        <select id="issue-type" name="issue-type" required>
                            <option value="">Select issue type</option>
                            <option value="broken-link">Broken Link</option>
                            <option value="missing-page">Missing Page</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="issue-description">Description:</label>
                        <textarea id="issue-description" 
                                  name="issue-description" 
                                  rows="4" 
                                  placeholder="Describe the issue you encountered..."
                                  required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="user-email">Email (optional):</label>
                        <input type="email" 
                               id="user-email" 
                               name="user-email"
                               placeholder="your@email.com">
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Submit Report</button>
                        <button type="button" class="btn btn-secondary" id="cancel-report">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Loading Scripts -->
    <script>
        // Immediate theme detection
        (function() {
            const saved = localStorage.getItem('portfolio_theme') || 'auto';
            const resolved = saved === 'auto' ? 
                (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : saved;
            document.documentElement.setAttribute('data-theme', resolved);
        })();
        
        // Basic loading state management
        window.errorPageState = {
            loaded: false,
            animations: false,
            interactive: false
        };
    </script>
    
    <!-- Load JavaScript -->
    <script src="/assets/js/core/utils.js"></script>
    <script src="/assets/js/core/config.js"></script>
    <script src="/assets/js/components/theme-manager.js" defer></script>
    <script src="/assets/js/components/404-handler.js" defer></script>
    
    <!-- Analytics (if consent given) -->
    <script>
        if (localStorage.getItem('analytics_consent') === 'true') {
            // Track 404 error
            if (typeof gtag !== 'undefined') {
                gtag('event', 'page_not_found', {
                    page_location: window.location.href,
                    page_path: window.location.pathname
                });
            }
        }
    </script>
</body>
</html>
